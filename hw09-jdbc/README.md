# Домашнее задания №09 "Самодельный ORM"

## Условие
Работа должна использовать базу данных `H2`.
Создайте в базе таблицу `User` с полями:

* `id bigint(20) NOT NULL auto_increment`
* `name varchar(255)`
* `age int(3)`

Создайте свою аннотацию `@Id`

Создайте класс `User` (с полями, которые соответствуют таблице, поле `id` отметьте аннотацией).

Напишите `JdbcTemplate`, который умеет работать с классами, в котрых есть поле с аннотацией `@Id`.
Executor должен сохранять объект в базу и читать объект из базы.
Имя таблицы должно соответствовать имени класса, а поля класса - это колонки в таблице.

Методы `JdbcTemplate`'а:
* `void create(T objectData);`
* `void update(T objectData);`
* `void createOrUpdate(T objectData); // опционально.`
* `<T> T load(long id, Class<T> clazz);`

Проверьте его работу на классе `User`.

Метод `createOrUpdate` - необязательный.
Он должен "проверять" наличие объекта в таблице и создавать новый или обновлять.

Создайте еще одну таблицу `Account`:
* `no bigint(20) NOT NULL auto_increment`
* `type varchar(255)`
* `rest number`

Создайте для этой таблицы класс `Account` и проверьте работу `JdbcTemplate` на этом классе.

## Реализация
1. В пакете `ru.otus.hw09.api` находятся сущности, DAO и сервисы для работы с пользователями и счетами.
2. В пакете `ru.otus.hw09.h2` реализован `DataSourceH2` для работы с БД H2, там же есть классы
для мэпперов модули в таблицы БД.
3. В пакете `ru.otus.hw09.jdbc` реализованы DAO для работы с пользователями и счетами, а также
дженерик DbExecturor, для работы с различными сущностями, содержащими аннотацию `@Id`.
4. В пакете `ru.otus.hw09.orm` находится аннотация `@Id` и абстрактный класс `ORMapper` для создания
таблицы в БД.
5. Для сервисов работы с пользователями и счетами созданы тесты, также работа демонстрируется в
классе `ru.otus.hw09.Demo`.