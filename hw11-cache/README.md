# Домашнее задание №11 "Свой cache engine"

## Условие
Закончите реализацию MyCache из вебинара.
Используйте WeakHashMap для хранения значений.

Добавьте кэширование в DBService из задания про Hibernate ORM или "Самодельный ORM".
Убедитесь, что ваш кэш действительно работает быстрее СУБД и сбрасывается при недостатке памяти.

## Реализация
1. В пакетах `ru.otus.hw11.api`, `ru.otus.hw11.hibernate` содержится решение из ДЗ №10. Дополнительно добавлен
интерфейс UserCache и реализация `ru.otus.hw11.api.service.UserServiceCachedImpl` с кешированием.
2. `UserCache` реализован на основе `MyCache`. Демонстрацию работы `MyCache` можно увидеть 
на примере `ru.otus.hw11.cachehw.HWCacheDemo`.
3. Написан тест `ru.otus.hw11.api.service.UserServiceCachedImplTest` для демонстрации корректной работы
сервиса пользователей с кешированием. Добавлен метод, показывающий корректную работу метода по загрузке
пользователя из БД, когда кэш сброшен при GC.
4. Для сравнения скорости работы сервисов написан бенчмарк на основе JMH `ru.otus.hw11.api.service.UserServiceImplsJMHTest`,
который показал следующие результаты:
* Предварительно в БД сохранены 100 пользователей: чтение с кэшем быстрее примерно в 5 раз.
* Предварительно в БД сохранены 1000 пользователей: чтение с кэшем быстрее примерно в 2 раза.
* Сохранение в БД 100 пользователей, потом чтение: с кэшем быстрее примерно в 1.5 раза.
* Сохранение в БД 1000 пользователей, потом чтение: с кэшем чуть медленнее. Причина скорее всего в том,
что тут in-memory mode, а операции с кэшем тоже имеют свою цену.